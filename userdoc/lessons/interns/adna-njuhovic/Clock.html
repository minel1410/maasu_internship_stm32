<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.1.1.4. Clock Initialization &mdash; Maasu Internship 4 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common.css?v=bd9ab754" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/layouts.css?v=448c382f" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/styles.css?v=6c8eb985" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/modern.css?v=ffa536d2" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=f783d6a5"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="4.1.1.5. USART Functionalities for the STM32F411" href="USART.html" />
    <link rel="prev" title="4.1.1.3. GPIO Firmware for STM32F411 MCU" href="GPIO.html" />
<link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Maasu Internship 4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/fundamentals.html">2. Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment_setup/environment_setup.html">3. Development Environment Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lessons.html">4. Lessons</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../lessons.html">4.1. Lessons written by each intern</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="lessons.html">4.1.1. Lessons by Adna Njuhović</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="vmodel.html">4.1.1.1. V Model in Embedded Systems Engineering</a></li>
<li class="toctree-l4"><a class="reference internal" href="stm32overview.html">4.1.1.2. MCU (Microcontroller Unit)</a></li>
<li class="toctree-l4"><a class="reference internal" href="GPIO.html">4.1.1.3. GPIO Firmware for STM32F411 MCU</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">4.1.1.4. Clock Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="USART.html">4.1.1.5. USART Functionalities for the STM32F411</a></li>
<li class="toctree-l4"><a class="reference internal" href="Timer.html">4.1.1.6. Timer Lesson</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../anesa-lakovic/lessons.html">4.1.2. Lessons by Anesa Laković</a></li>
<li class="toctree-l3"><a class="reference internal" href="../demir-hasicic/lessons.html">4.1.3. Lessons by Demir Hasičić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../emina-mesic/lessons.html">4.1.4. Lessons by Emina Mešić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-fatic/lessons.html">4.1.5. Lessons by Lamija Fatić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../muhibija-kavazovic/lessons.html">4.1.6. Lessons by Muhibija Kavazović</a></li>
<li class="toctree-l3"><a class="reference internal" href="../semin-murtic/lessons.html">4.1.7. Lessons by Semin Murtić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tarik-sinanovic/lessons.html">4.1.8. Lessons by Tarik Sinanović</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../requirements/requirements.html">5. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faqs/faqs.html">6. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/glossary.html">7. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">8. Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Maasu Internship 4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../lessons.html"><span class="section-number">4. </span>Lessons</a></li>
          <li class="breadcrumb-item"><a href="../lessons.html"><span class="section-number">4.1. </span>Lessons written by each intern</a></li>
          <li class="breadcrumb-item"><a href="lessons.html"><span class="section-number">4.1.1. </span>Lessons by Adna Njuhović</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.1.1.4. </span>Clock Initialization</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/userdoc/lessons/interns/adna-njuhovic/Clock.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="clock-initialization">
<h1><span class="section-number">4.1.1.4. </span>Clock Initialization<a class="headerlink" href="#clock-initialization" title="Link to this heading"></a></h1>
<section id="overview-of-clock-initialization-in-the-stm32f411">
<h2><span class="section-number">4.1.1.4.1. </span>Overview of Clock Initialization in the STM32F411<a class="headerlink" href="#overview-of-clock-initialization-in-the-stm32f411" title="Link to this heading"></a></h2>
<p>Clock initialization in the STM32F411 is crucial for setting the operational speed of the
microcontroller and ensuring reliable peripheral communication. STM32F411 provides flexible
clock source options and prescalers to adjust the clock frequency as needed for application
requirements. Here are the primary components and steps involved in this process:</p>
<ol class="arabic">
<li><p><strong>Clock Sources:</strong></p>
<ul>
<li><p><strong>High-Speed Sources:</strong>
- <strong>HSI (High-Speed Internal)</strong>: A 16 MHz RC oscillator, quick to start but less precise.</p>
<blockquote>
<div><p>Useful in applications where timing accuracy is not critical.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>HSE (High-Speed External)</strong>: An external crystal or oscillator, typically between 8 and
25 MHz (often 25 MHz in STM32F411 applications). HSE is highly stable and accurate,
ideal for applications where clock precision is key.</p></li>
</ul>
</li>
<li><p><strong>Low-Speed Sources:</strong>
- <strong>LSI (Low-Speed Internal)</strong>: Runs at approximately 32 kHz and is used for low-power</p>
<blockquote>
<div><p>applications, such as the watchdog timer.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>LSE (Low-Speed External)</strong>: A 32.768 kHz crystal oscillator, suitable for real-time clock
(RTC) applications where timing accuracy is essential over long periods.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Reset and Clock Control (RCC):</strong></p>
<ul>
<li><p>The RCC module enables clock selection, adjustment, and control across the system. It
manages clock signals for the CPU, buses, and peripherals, making it central to achieving
optimal performance and power management.</p></li>
<li><p>Key RCC Registers:
- <strong>RCC_CR (Clock Control Register)</strong>: Controls the activation of HSI, HSE, and PLL oscillators.</p>
<blockquote>
<div><p>Contains bits to enable oscillators and check stability flags (e.g., <cite>HSERDY</cite> for HSE stability).</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>RCC_PLLCFGR (PLL Configuration Register)</strong>: Configures the PLL parameters, allowing
the user to adjust the input frequency and set multipliers and dividers to achieve target
frequencies.</p></li>
<li><p><strong>RCC_CFGR (Clock Configuration Register)</strong>: Defines the system clock source and prescalers
for the AHB and APB buses.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Prescalers:</strong></p>
<ul class="simple">
<li><p>The RCC offers prescalers that divide clock frequencies for different system components,
such as the Advanced High-Performance Bus (AHB) and the Advanced Peripheral Buses (APB1
and APB2). For example, APB1 operates with a maximum clock of 50 MHz, while APB2 supports
up to 100 MHz.</p></li>
</ul>
</li>
<li><p><strong>Phase-Locked Loop (PLL):</strong></p>
<ul class="simple">
<li><p>The PLL is a programmable clock multiplier used to reach higher frequencies by configuring
the source input, dividers, and multipliers. This is especially useful for generating high
frequencies from a lower input clock, necessary for high-speed processing.</p></li>
</ul>
</li>
</ol>
</section>
<section id="configuring-the-pll-to-obtain-100-mhz-from-a-25-mhz-input">
<h2><span class="section-number">4.1.1.4.2. </span>Configuring the PLL to Obtain 100 MHz from a 25 MHz Input<a class="headerlink" href="#configuring-the-pll-to-obtain-100-mhz-from-a-25-mhz-input" title="Link to this heading"></a></h2>
<p>To achieve a 100 MHz system clock from a 25 MHz external clock source, the following settings should be applied to the PLL parameters in the <cite>RCC_PLLCFGR</cite> register:</p>
<ol class="arabic">
<li><p>Enable and Stabilize HSE:
- Set the <cite>HSEON</cite> bit in the <cite>RCC_CR</cite> register to enable the High-Speed External (HSE) clock.
- Check the <cite>HSERDY</cite> flag to confirm that the HSE oscillator is stable before proceeding.</p></li>
<li><p>Configure PLL Parameters:
- <strong>PLLM (Prescaler):</strong> To meet the recommended input frequency range for the PLL, divide the 25 MHz HSE clock down to approximately 1-2 MHz. Set <cite>PLLM = 12</cite>,</p>
<blockquote>
<div><p>which divides 25 MHz by 12 to yield approximately 2.08 MHz input to the PLL.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>PLLN (Multiplier):</strong> Set <cite>PLLN = 192</cite> to multiply the 2.08 MHz input by 192, producing a high intermediate frequency of 400 MHz.</p></li>
<li><p><strong>PLLP (Post-divider):</strong> Set <cite>PLLP = 4</cite>, which divides the 400 MHz by 4, resulting in the target 100 MHz system clock frequency.</p></li>
</ul>
</li>
<li><p>Enable the PLL and Set it as the System Clock:
- Enable the PLL by setting the <cite>PLLON</cite> bit in <cite>RCC_CR</cite> and wait for the <cite>PLLRDY</cite> flag to confirm stability.
- In <cite>RCC_CFGR</cite>, configure the PLL as the system clock source by setting the <cite>SW</cite> bits to <cite>10</cite>, activating the PLL as the main clock.</p></li>
</ol>
</section>
<section id="significance-of-this-configuration">
<h2><span class="section-number">4.1.1.4.3. </span>Significance of This Configuration<a class="headerlink" href="#significance-of-this-configuration" title="Link to this heading"></a></h2>
<p>Configuring the PLL to achieve a 100 MHz clock frequency allows the STM32F411 to operate at
its full performance potential, essential for time-sensitive tasks like high-speed data processing,
advanced motor control, or communication protocols (e.g., USB, CAN). High frequencies enable
faster instruction execution and peripheral handling, supporting applications where timing
precision and processing power are essential.</p>
<p>In summary, STM32F411’s clock system enables flexibility to meet different application requirements.
Proper clock initialization, including selecting an optimal clock source and configuring the PLL, is
crucial to balance performance, precision, and power efficiency across various microcontroller
operations.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="GPIO.html" class="btn btn-neutral float-left" title="4.1.1.3. GPIO Firmware for STM32F411 MCU" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="USART.html" class="btn btn-neutral float-right" title="4.1.1.5. USART Functionalities for the STM32F411" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Maasu BH d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>