<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.1.1.3. GPIO Firmware for STM32F411 MCU &mdash; Maasu Internship 4 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common.css?v=bd9ab754" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/layouts.css?v=448c382f" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/styles.css?v=6c8eb985" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/modern.css?v=ffa536d2" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=f783d6a5"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="4.1.1.4. Clock Initialization" href="Clock.html" />
    <link rel="prev" title="4.1.1.2. MCU (Microcontroller Unit)" href="stm32overview.html" />
<link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Maasu Internship 4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/fundamentals.html">2. Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment_setup/environment_setup.html">3. Development Environment Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lessons.html">4. Lessons</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../lessons.html">4.1. Lessons written by each intern</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="lessons.html">4.1.1. Lessons by Adna Njuhović</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="vmodel.html">4.1.1.1. V Model in Embedded Systems Engineering</a></li>
<li class="toctree-l4"><a class="reference internal" href="stm32overview.html">4.1.1.2. MCU (Microcontroller Unit)</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">4.1.1.3. GPIO Firmware for STM32F411 MCU</a></li>
<li class="toctree-l4"><a class="reference internal" href="Clock.html">4.1.1.4. Clock Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="USART.html">4.1.1.5. USART Functionalities for the STM32F411</a></li>
<li class="toctree-l4"><a class="reference internal" href="Timer.html">4.1.1.6. Timer Lesson</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../demir-hasicic/lessons.html">4.1.2. Lessons by Demir Hasičić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../emina-mesic/lessons.html">4.1.3. Lessons by Emina Mešić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-fatic/lessons.html">4.1.4. Lessons by Lamija Fatić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../muhibija-kavazovic/lessons.html">4.1.5. Lessons by Muhibija Kavazović</a></li>
<li class="toctree-l3"><a class="reference internal" href="../semin-murtic/lessons.html">4.1.6. Lessons by Semin Murtić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tarik-sinanovic/lessons.html">4.1.7. Lessons by Tarik Sinanović</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../requirements/requirements.html">5. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faqs/faqs.html">6. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/glossary.html">7. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">8. Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Maasu Internship 4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../lessons.html"><span class="section-number">4. </span>Lessons</a></li>
          <li class="breadcrumb-item"><a href="../lessons.html"><span class="section-number">4.1. </span>Lessons written by each intern</a></li>
          <li class="breadcrumb-item"><a href="lessons.html"><span class="section-number">4.1.1. </span>Lessons by Adna Njuhović</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.1.1.3. </span>GPIO Firmware for STM32F411 MCU</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/userdoc/lessons/interns/adna-njuhovic/GPIO.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gpio-firmware-for-stm32f411-mcu">
<h1><span class="section-number">4.1.1.3. </span>GPIO Firmware for STM32F411 MCU<a class="headerlink" href="#gpio-firmware-for-stm32f411-mcu" title="Link to this heading"></a></h1>
<section id="what-is-gpio">
<h2><span class="section-number">4.1.1.3.1. </span>1. What is GPIO?<a class="headerlink" href="#what-is-gpio" title="Link to this heading"></a></h2>
<p>In the STM32F411 microcontroller, the GPIO (General Purpose Input/Output) functionality
allows the user to configure pins as either input or output. This flexibility is fundamental for
interfacing the microcontroller with external devices such as LEDs, switches, sensors, and
other peripherals. Each GPIO pin can be individually configured with various parameters like
mode, output type, speed, and pull-up/pull-down resistors.</p>
</section>
<section id="gpio-functionality-and-configuration">
<h2><span class="section-number">4.1.1.3.2. </span>2. GPIO Functionality and Configuration<a class="headerlink" href="#gpio-functionality-and-configuration" title="Link to this heading"></a></h2>
<p>Each GPIO pin on the STM32F411 has several modes, configurable via registers:</p>
<ul class="simple">
<li><p><strong>Input mode</strong>: Used for reading external signals.</p></li>
<li><p><strong>Output mode</strong>: Used to drive external devices, like LEDs or relays.</p></li>
<li><p><strong>Alternate Function mode</strong>: Used when a pin is designated for a specific peripheral (e.g.,
UART, I2C, SPI).</p></li>
<li><p><strong>Analog mode</strong>: Used for analog input/output (e.g., ADC).</p></li>
</ul>
<p><strong>Key Configurations:</strong></p>
<ul class="simple">
<li><p><strong>Pin Mode (Input/Output/Alternate/Analog)</strong>: Configured in the GPIOx_MODER register.</p></li>
<li><p><strong>Output Type (Push-pull/Open-drain)</strong>: Configured in the GPIOx_OTYPER register.</p></li>
<li><p><strong>Speed (Low/Medium/High/Very High)</strong>: Configured in the GPIOx_OSPEEDR register.</p></li>
<li><p><strong>Pull-up/Pull-down Resistors</strong>: Configured in the GPIOx_PUPDR register to avoid floating inputs.</p></li>
</ul>
<p>These configurations enable users to control individual pin behavior based on the connected
external device requirements.</p>
</section>
<section id="gpio-output-registers-odr-and-bsrr">
<h2><span class="section-number">4.1.1.3.3. </span>3. GPIO Output Registers: ODR and BSRR<a class="headerlink" href="#gpio-output-registers-odr-and-bsrr" title="Link to this heading"></a></h2>
<p>The STM32F411 microcontroller has several registers for managing the output on GPIO pins,
with the Output Data Register (ODR) and Bit Set/Reset Register (BSRR) being the primary ones.</p>
<p>### Output Data Register (ODR)</p>
<p>The <strong>GPIOx_ODR</strong> is a 16-bit register used to set or clear the output level of each GPIO pin in one
operation. Writing <cite>1</cite> or <cite>0</cite> to a specific bit in this register sets the corresponding pin to HIGH or
LOW, respectively.</p>
<ul class="simple">
<li><p><strong>Usage</strong>: Directly writing to ODR controls all pins at once. If you want to control multiple pins
simultaneously, ODR is efficient.</p></li>
<li><p><strong>Example</strong>: To turn on a specific pin (e.g., GPIOA pin 5), you could set the corresponding bit in
ODR to <cite>1</cite>. For instance, <cite>GPIOA-&gt;ODR |= (1 &lt;&lt; 5);</cite> would set pin 5 to HIGH.</p></li>
</ul>
<p>### Bit Set/Reset Register (BSRR)</p>
<p>The <strong>GPIOx_BSRR</strong> is a 32-bit register that allows setting and resetting individual bits atomically.
This register provides two 16-bit halves:</p>
<ul class="simple">
<li><p><strong>Lower 16 bits (BS)</strong>: Used to set pins to HIGH.</p></li>
<li><p><strong>Upper 16 bits (BR)</strong>: Used to reset pins to LOW.</p></li>
</ul>
<p>Unlike ODR, the BSRR register is designed for atomic operations, meaning you can
simultaneously set and reset bits without affecting other bits. This is particularly useful for
avoiding unintentional changes when multiple bits need to be controlled.</p>
<ul class="simple">
<li><p><strong>Usage</strong>: To set a pin to HIGH, write <cite>1</cite> to the bit in the lower half (BS). To reset (clear) a pin,
write <cite>1</cite> to the corresponding bit in the upper half (BR).</p></li>
<li><p><strong>Example</strong>:
- Set GPIOA pin 5: <cite>GPIOA-&gt;BSRR = (1 &lt;&lt; 5);</cite>
- Reset GPIOA pin 5: <cite>GPIOA-&gt;BSRR = (1 &lt;&lt; (5 + 16));</cite></p></li>
</ul>
</section>
<section id="differences-between-odr-output-data-register-and-bsrr-bit-set-reset-register">
<h2><span class="section-number">4.1.1.3.4. </span>4. Differences Between ODR (Output Data Register) and BSRR (Bit Set/Reset Register)<a class="headerlink" href="#differences-between-odr-output-data-register-and-bsrr-bit-set-reset-register" title="Link to this heading"></a></h2>
<p>The Output Data Register (ODR) and the Bit Set/Reset Register (BSRR) both control GPIO pin
outputs, but they have key differences in functionality, safety, and practical applications.</p>
<p><strong>Comparison of ODR and BSRR</strong></p>
<p><strong>Summary</strong>:</p>
<ul class="simple">
<li><p><strong>ODR</strong> is suitable for quick, multi-pin changes but requires caution when used in environments
with concurrent processes, as modifying individual pins might affect others unintentionally.</p></li>
<li><p><strong>BSRR</strong> provides more precise control with atomic operations, making it safer for use in
interrupt-driven or multitasking applications where independent pin control is crucial.</p></li>
</ul>
</section>
<section id="practical-example-toggling-an-led-using-odr-and-bsrr">
<h2><span class="section-number">4.1.1.3.5. </span>5. Practical Example: Toggling an LED Using ODR and BSRR<a class="headerlink" href="#practical-example-toggling-an-led-using-odr-and-bsrr" title="Link to this heading"></a></h2>
<p>Consider a setup where an LED is connected to GPIOA pin 5. We want to toggle this LED on and
off.</p>
<p><strong>Example with ODR</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Configure GPIOA pin 5 as output in MODER register</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">MODER</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">  </span><span class="c1">// Sets PA5 as output</span>

<span class="c1">// Toggle LED</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">ODR</span><span class="w"> </span><span class="o">^=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w">  </span><span class="c1">// XOR to toggle PA5 state</span>
</pre></div>
</div>
<p>In this example, the ODR register is used to toggle the output state of pin 5, thus turning the
LED on or off depending on its current state.</p>
<p><strong>Example with BSRR</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Configure GPIOA pin 5 as output in MODER register</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">MODER</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">  </span><span class="c1">// Sets PA5 as output</span>

<span class="c1">// Set LED ON</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">BSRR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w">  </span><span class="c1">// Sets PA5 to HIGH</span>

<span class="c1">// Set LED OFF</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">BSRR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">16</span><span class="p">));</span><span class="w">  </span><span class="c1">// Resets PA5 to LOW</span>
</pre></div>
</div>
<p>Here, BSRR is used to set or reset the pin without affecting other bits. This approach is
preferred in applications where atomicity is essential, such as in real-time systems or when
dealing with multiple outputs.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="stm32overview.html" class="btn btn-neutral float-left" title="4.1.1.2. MCU (Microcontroller Unit)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Clock.html" class="btn btn-neutral float-right" title="4.1.1.4. Clock Initialization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Maasu BH d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>