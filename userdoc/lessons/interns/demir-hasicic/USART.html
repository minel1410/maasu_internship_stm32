<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.1.3.4. USART &mdash; Maasu Internship 4 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common.css?v=bd9ab754" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/layouts.css?v=448c382f" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/styles.css?v=6c8eb985" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/modern.css?v=ffa536d2" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=f783d6a5"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="4.1.3.5. Timer" href="Timer.html" />
    <link rel="prev" title="4.1.3.3. GPIO" href="GPIO.html" />
<link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Maasu Internship 4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/fundamentals.html">2. Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment_setup/environment_setup.html">3. Development Environment Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lessons.html">4. Lessons</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../lessons.html">4.1. Lessons written by each intern</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adna-njuhovic/lessons.html">4.1.1. Lessons by Adna Njuhović</a></li>
<li class="toctree-l3"><a class="reference internal" href="../anesa-lakovic/lessons.html">4.1.2. Lessons by Anesa Laković</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="lessons.html">4.1.3. Lessons by Demir Hasičić</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="vmodel.html">4.1.3.1. V-model</a></li>
<li class="toctree-l4"><a class="reference internal" href="stm32overview.html">4.1.3.2. STM32F411</a></li>
<li class="toctree-l4"><a class="reference internal" href="GPIO.html">4.1.3.3. GPIO</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">4.1.3.4. USART</a></li>
<li class="toctree-l4"><a class="reference internal" href="Timer.html">4.1.3.5. Timer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../emina-mesic/lessons.html">4.1.4. Lessons by Emina Mešić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-fatic/lessons.html">4.1.5. Lessons by Lamija Fatić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../muhibija-kavazovic/lessons.html">4.1.6. Lessons by Muhibija Kavazović</a></li>
<li class="toctree-l3"><a class="reference internal" href="../semin-murtic/lessons.html">4.1.7. Lessons by Semin Murtić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tarik-sinanovic/lessons.html">4.1.8. Lessons by Tarik Sinanović</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../requirements/requirements.html">5. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faqs/faqs.html">6. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/glossary.html">7. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">8. Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Maasu Internship 4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../lessons.html"><span class="section-number">4. </span>Lessons</a></li>
          <li class="breadcrumb-item"><a href="../lessons.html"><span class="section-number">4.1. </span>Lessons written by each intern</a></li>
          <li class="breadcrumb-item"><a href="lessons.html"><span class="section-number">4.1.3. </span>Lessons by Demir Hasičić</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.1.3.4. </span>USART</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/userdoc/lessons/interns/demir-hasicic/USART.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usart">
<h1><span class="section-number">4.1.3.4. </span>USART<a class="headerlink" href="#usart" title="Link to this heading"></a></h1>
<section id="introduction">
<h2><span class="section-number">4.1.3.4.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>USART (Universal Synchronous/Asynchronous Receiver/Transmitter) is a key peripheral in STM32F411 microcontrollers, enabling serial communication between microcontrollers and other devices such as computers, sensors, or peripherals. It supports both synchronous and asynchronous modes, making it highly versatile for various embedded applications.</p>
</section>
<section id="common-use-cases">
<h2><span class="section-number">4.1.3.4.2. </span>Common Use Cases:<a class="headerlink" href="#common-use-cases" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Debugging or sending logs using a serial terminal (e.g., PuTTY or Tera Term).</p></li>
<li><p>Real-time data exchange with external devices like GPS modules or sensors.</p></li>
</ul>
</section>
<section id="key-configurations-for-usart-communication">
<h2><span class="section-number">4.1.3.4.3. </span>Key Configurations for USART Communication<a class="headerlink" href="#key-configurations-for-usart-communication" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p><strong>Baud Rate</strong>:
- Determines the rate at which data is transmitted and received, measured in bits per second (bps).
- Example:</p>
<blockquote>
<div><ul class="simple">
<li><p>Baud rate = 9600 bps (9600 bits transmitted per second).</p></li>
<li><p>Higher baud rates like 115200 enable faster transmission but may increase errors over long distances.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Data Format</strong>:
- Data frames consist of several bits that convey information. Key components include:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Data Bits</strong>: Number of bits in each frame that carry the actual data (commonly 8 bits).</p></li>
<li><p><strong>Parity</strong>: Optional error-checking mechanism (e.g., None, Even, Odd).</p></li>
<li><p><strong>Stop Bits</strong>: Number of bits used to indicate the end of a frame (commonly 1 or 2).</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Control Registers</strong>:
- Used to configure USART settings like baud rate, enabling transmitter/receiver, and data format.</p></li>
</ol>
</section>
<section id="usart-configuration-on-stm32f411">
<h2><span class="section-number">4.1.3.4.4. </span>USART Configuration on STM32F411<a class="headerlink" href="#usart-configuration-on-stm32f411" title="Link to this heading"></a></h2>
<p>To configure USART for communication, follow these steps:</p>
<ol class="arabic">
<li><p><strong>Enable the USART Peripheral Clock</strong>:
- Enable the clock for the USART peripheral using the RCC register.</p></li>
<li><p><strong>Configure GPIO Pins</strong>:
- Set the TX and RX pins to Alternate Function mode.
- Map them to the appropriate Alternate Function (AF) based on the selected USART:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>USART1</strong>:
- TX: PA9 or PB6
- RX: PA10 or PB7
- Alternate Function: AF7</p></li>
<li><p><strong>USART2</strong>:
- TX: PA2 or PD5
- RX: PA3 or PD6
- Alternate Function: AF7</p></li>
<li><p><strong>USART6</strong>:
- TX: PC6 or PG14
- RX: PC7 or PG9
- Alternate Function: AF8</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Set Baud Rate</strong>:
- Calculate the baud rate using the formula:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>For oversampling by 16</strong>: <code class="docutils literal notranslate"><span class="pre">USARTDIV</span> <span class="pre">=</span> <span class="pre">Fck</span> <span class="pre">/</span> <span class="pre">Baudrate</span></code></p></li>
<li><p><strong>For oversampling by 8</strong>: <code class="docutils literal notranslate"><span class="pre">USARTDIV</span> <span class="pre">=</span> <span class="pre">Fck</span> <span class="pre">/</span> <span class="pre">(Baudrate</span> <span class="pre">*</span> <span class="pre">2)</span></code></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Example:
- Fck = 50 MHz
- Desired baud rate = 115200
- Calculated value: <code class="docutils literal notranslate"><span class="pre">USARTDIV</span> <span class="pre">=</span> <span class="pre">50,000,000</span> <span class="pre">/</span> <span class="pre">115200</span> <span class="pre">=</span> <span class="pre">434.03</span></code></p></li>
</ul>
</li>
<li><p><strong>Configure Control Registers</strong>:
- Enable USART by setting the <strong>UE (USART Enable)</strong> bit in the CR1 register.
- Enable the transmitter and receiver by setting the <strong>TE (Transmitter Enable)</strong> and <strong>RE (Receiver Enable)</strong> bits in the CR1 register.</p></li>
</ol>
</section>
<section id="example-setting-up-usart-for-communication">
<h2><span class="section-number">4.1.3.4.5. </span>Example: Setting Up USART for Communication<a class="headerlink" href="#example-setting-up-usart-for-communication" title="Link to this heading"></a></h2>
<p>This example demonstrates setting up USART2 for communication at 9600 baud with a serial monitor.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Enable the USART2 peripheral clock</span>
<span class="n">RCC</span><span class="o">-&gt;</span><span class="n">APB1ENR</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">RCC_APB1ENR_USART2EN</span><span class="p">;</span>

<span class="c1">// Configure GPIO Pins for USART2</span>
<span class="c1">// Set PA2 (TX) and PA3 (RX) to Alternate Function mode</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">MODER</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mh">0x2</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="mh">0x2</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">AFR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mh">0x7</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="mh">0x7</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span><span class="w"> </span><span class="c1">// Alternate Function AF7</span>

<span class="c1">// Configure Baud Rate (9600 bps)</span>
<span class="n">USART2</span><span class="o">-&gt;</span><span class="n">BRR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50000000</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">9600</span><span class="p">;</span>

<span class="c1">// Enable Transmitter and Receiver</span>
<span class="n">USART2</span><span class="o">-&gt;</span><span class="n">CR1</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">USART_CR1_TE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">USART_CR1_RE</span><span class="p">;</span>

<span class="c1">// Enable USART</span>
<span class="n">USART2</span><span class="o">-&gt;</span><span class="n">CR1</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">USART_CR1_UE</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="conclusion">
<h2><span class="section-number">4.1.3.4.6. </span>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading"></a></h2>
<p>USART is a versatile and essential peripheral in STM32 microcontrollers, providing robust solutions for serial communication in both synchronous and asynchronous modes. By properly configuring key parameters such as baud rate, data format, and control registers, USART enables efficient data exchange with external devices like sensors, computers, and other microcontrollers. Mastering the initialization process, pin configurations, and data transmission ensures reliable communication, making USART an indispensable tool for embedded applications.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="GPIO.html" class="btn btn-neutral float-left" title="4.1.3.3. GPIO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Timer.html" class="btn btn-neutral float-right" title="4.1.3.5. Timer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Maasu BH d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>