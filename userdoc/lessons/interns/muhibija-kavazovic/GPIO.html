<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.1.6.4. GPIO on STM32F411 &mdash; Maasu Internship 4 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common.css?v=bd9ab754" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/layouts.css?v=448c382f" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/styles.css?v=6c8eb985" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/modern.css?v=ffa536d2" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=f783d6a5"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="4.1.6.5. USART on STM32F411" href="USART.html" />
    <link rel="prev" title="4.1.6.3. Clock Initialization on STM32F411" href="Clock.html" />
<link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Maasu Internship 4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/fundamentals.html">2. Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment_setup/environment_setup.html">3. Development Environment Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lessons.html">4. Lessons</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../lessons.html">4.1. Lessons written by each intern</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../adna-njuhovic/lessons.html">4.1.1. Lessons by Adna Njuhović</a></li>
<li class="toctree-l3"><a class="reference internal" href="../anesa-lakovic/lessons.html">4.1.2. Lessons by Anesa Laković</a></li>
<li class="toctree-l3"><a class="reference internal" href="../demir-hasicic/lessons.html">4.1.3. Lessons by Demir Hasičić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../emina-mesic/lessons.html">4.1.4. Lessons by Emina Mešić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-fatic/lessons.html">4.1.5. Lessons by Lamija Fatić</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="lessons.html">4.1.6. Lessons by Muhibija Kavazović</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="vmodel.html">4.1.6.1. V-Model Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="stm32f411.html">4.1.6.2. STM32F411 Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="Clock.html">4.1.6.3. Clock Initialization on STM32F411</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">4.1.6.4. GPIO on STM32F411</a></li>
<li class="toctree-l4"><a class="reference internal" href="USART.html">4.1.6.5. USART on STM32F411</a></li>
<li class="toctree-l4"><a class="reference internal" href="Timer.html">4.1.6.6. Timer on STM32F411</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../semin-murtic/lessons.html">4.1.7. Lessons by Semin Murtić</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tarik-sinanovic/lessons.html">4.1.8. Lessons by Tarik Sinanović</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../requirements/requirements.html">5. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faqs/faqs.html">6. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/glossary.html">7. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">8. Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Maasu Internship 4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../lessons.html"><span class="section-number">4. </span>Lessons</a></li>
          <li class="breadcrumb-item"><a href="../lessons.html"><span class="section-number">4.1. </span>Lessons written by each intern</a></li>
          <li class="breadcrumb-item"><a href="lessons.html"><span class="section-number">4.1.6. </span>Lessons by Muhibija Kavazović</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.1.6.4. </span>GPIO on STM32F411</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/userdoc/lessons/interns/muhibija-kavazovic/GPIO.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gpio-on-stm32f411">
<h1><span class="section-number">4.1.6.4. </span>GPIO on STM32F411<a class="headerlink" href="#gpio-on-stm32f411" title="Link to this heading"></a></h1>
<section id="overview-of-gpio-functionality">
<h2><span class="section-number">4.1.6.4.1. </span>Overview of GPIO Functionality<a class="headerlink" href="#overview-of-gpio-functionality" title="Link to this heading"></a></h2>
<p>In STM32 microcontrollers, General-Purpose Input/Output (GPIO) pins play a crucial role in enabling communication between the microcontroller and various peripheral devices, such as LEDs, sensors, switches, and more. GPIO pins can be configured in multiple modes, allowing them to function as either inputs or outputs depending on the application’s requirements. GPIO configurations are managed via specific registers, which allow flexible control over pin states and behavior.</p>
</section>
<section id="key-configurations-of-gpio-on-stm32f411">
<h2><span class="section-number">4.1.6.4.2. </span>Key Configurations of GPIO on STM32F411<a class="headerlink" href="#key-configurations-of-gpio-on-stm32f411" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Input Mode:</strong> Configures the pin to read external signals. It’s commonly used with switches and sensors.</p></li>
<li><p><strong>Output Mode:</strong> Sets the pin to output a signal, often used to control devices such as LEDs.</p></li>
<li><p><strong>Alternate Function Mode:</strong> Configures the pin for peripheral-specific tasks, like UART, SPI, or I2C.</p></li>
<li><p><strong>Analog Mode:</strong> Used for analog functions, typically with ADC (Analog-to-Digital Converters).</p></li>
</ol>
<p>Each GPIO pin on the STM32F411 can be configured for one of the above modes, along with pull-up or pull-down resistors if needed, using control registers.</p>
</section>
<section id="registers-for-gpio-configuration">
<h2><span class="section-number">4.1.6.4.3. </span>Registers for GPIO Configuration<a class="headerlink" href="#registers-for-gpio-configuration" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Output Data Register (ODR)</strong></p>
<ul class="simple">
<li><p>The ODR controls the output state of each GPIO pin.</p></li>
<li><p>Each bit in the ODR corresponds to one GPIO pin, allowing control over individual pin states.</p></li>
<li><p>Writing a 1 or 0 to a bit in the ODR sets the corresponding pin to high or low, respectively.</p></li>
<li><p>Example usage: If we want to turn an LED on and off, we can toggle the corresponding bit in the ODR to change the output level of that GPIO pin.</p></li>
</ul>
</li>
<li><p><strong>Bit Set/Reset Register (BSRR)</strong></p>
<ul class="simple">
<li><p>The BSRR allows atomic manipulation of GPIO pin states, meaning it provides a faster and safer way to modify specific bits.</p></li>
<li><p>This register is split into two 16-bit sections:</p>
<ul>
<li><p>The first 16 bits control the “set” operation, turning specific pins high.</p></li>
<li><p>The last 16 bits control the “reset” operation, turning specific pins low.</p></li>
</ul>
</li>
<li><p>Writing to the BSRR is preferred for toggling pins, as it prevents interference from simultaneous read-modify-write operations that might occur with ODR.</p></li>
<li><p>Example: To turn on an LED connected to a GPIO pin, we need to write the set bit in BSRR. To turn it off, we need to write the reset bit in BSRR.</p></li>
</ul>
</li>
</ol>
</section>
<section id="examples">
<h2><span class="section-number">4.1.6.4.4. </span>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<section id="example-1-configure-pa9-for-led-control">
<h3><span class="section-number">4.1.6.4.4.1. </span>Example 1: Configure PA9 for LED Control<a class="headerlink" href="#example-1-configure-pa9-for-led-control" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Enable the GPIOA Clock:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">RCC</span><span class="o">-&gt;</span><span class="n">AHB1ENR</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">RCC_AHB1ENR_GPIOAEN</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>Set PA9 as Output:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">MODER</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">MODER</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
</pre></div>
</div>
</li>
<li><p>Turn ON the LED (Set PA9 High):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">ODR</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">9</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Turn OFF the LED (Set PA9 Low):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">ODR</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">9</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="example-2-configure-pa9-for-a-button">
<h3><span class="section-number">4.1.6.4.4.2. </span>Example 2: Configure PA9 for a Button<a class="headerlink" href="#example-2-configure-pa9-for-a-button" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Enable the GPIOA Clock:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">RCC</span><span class="o">-&gt;</span><span class="n">AHB1ENR</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">RCC_AHB1ENR_GPIOAEN</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>Set PA9 as Input:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">MODER</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
</pre></div>
</div>
</li>
<li><p>Enable Pull-Up or Pull-Down Resistor:</p>
<ul>
<li><p>Use pull-up if the button connects to GND when pressed:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">PUPDR</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">  </span><span class="c1">// Clear pull settings</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">PUPDR</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">   </span><span class="c1">// Enable pull-up resistor</span>
</pre></div>
</div>
</li>
<li><p>Use pull-down if the button connects to VCC when pressed:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">PUPDR</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">  </span><span class="c1">// Clear pull settings</span>
<span class="n">GPIOA</span><span class="o">-&gt;</span><span class="n">PUPDR</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w">   </span><span class="c1">// Enable pull-down resistor</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Read Button State:</p></li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Clock.html" class="btn btn-neutral float-left" title="4.1.6.3. Clock Initialization on STM32F411" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="USART.html" class="btn btn-neutral float-right" title="4.1.6.5. USART on STM32F411" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Maasu BH d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>